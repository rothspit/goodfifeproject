# é¡§å®¢ç®¡ç†ãƒ»CTIæ©Ÿèƒ½ ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰

## ðŸ“ ç®¡ç†ç”»é¢URL

### æœ¬ç•ªç’°å¢ƒ
- **ç®¡ç†ç”»é¢ãƒ­ã‚°ã‚¤ãƒ³**: http://210.131.222.152:3000/admin/login
- **ç®¡ç†ç”»é¢ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: http://210.131.222.152:3000/admin
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API**: http://210.131.222.152:5000

## ðŸš€ å®Œå…¨ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ï¼ˆæŽ¨å¥¨ï¼‰

æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ï¼ˆ210.131.222.152ï¼‰ã«ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ï¼š

```bash
# 1. ã‚µãƒ¼ãƒãƒ¼ã«SSHæŽ¥ç¶š
ssh root@210.131.222.152

# 2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹•
cd /var/www/goodfifeproject

# 3. æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
git fetch origin
git reset --hard origin/genspark_ai_developer

# 4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
cd client
cat > .env.local << 'ENVEOF'
NEXT_PUBLIC_API_URL=http://210.131.222.152:5000/api
NEXT_PUBLIC_SOCKET_URL=http://210.131.222.152:5000
ENVEOF

# 5. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®å®Œå…¨å†ãƒ“ãƒ«ãƒ‰ï¼ˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ï¼‰
rm -rf .next
rm -rf node_modules/.cache
npm install
npm run build

# 6. PM2ãƒ—ãƒ­ã‚»ã‚¹ã‚’å®Œå…¨å†èµ·å‹•
pm2 delete goodfife-frontend || true
pm2 start npm --name "goodfife-frontend" -- start

# 7. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ›´æ–°ãƒ»å†èµ·å‹•
cd ../server
npm install
pm2 restart goodfife-backend

# 8. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒžã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œï¼ˆåˆå›žã®ã¿ï¼‰
cd /var/www/goodfifeproject
mysql -u hitozumano_mitu -p'Hjmitsu^90' -D hitozumano_mitu < server/migrations/create_admin_user.sql
mysql -u hitozumano_mitu -p'Hjmitsu^90' -D hitozumano_mitu < server/migrations/create_customer_management_tables.sql

# 9. ç¨¼åƒç¢ºèª
pm2 status
curl http://localhost:5000/api/health
curl -I http://localhost:3000/
```

## ðŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼: "TypeError: Failed to fetch"

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒAPIã‚µãƒ¼ãƒãƒ¼ã«æŽ¥ç¶šã§ããªã„å ´åˆã«ç™ºç”Ÿã—ã¾ã™ã€‚

#### è§£æ±ºæ–¹æ³•1: ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ `Ctrl+Shift+R`ï¼ˆå¼·åˆ¶ãƒªãƒ­ãƒ¼ãƒ‰ï¼‰
2. ã¾ãŸã¯ã€é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰â†’ Application â†’ Clear storage

#### è§£æ±ºæ–¹æ³•2: ç’°å¢ƒå¤‰æ•°ã‚’ç¢ºèª
```bash
cd /var/www/goodfifeproject/client
cat .env.local
# ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¹ãå†…å®¹ï¼š
# NEXT_PUBLIC_API_URL=http://210.131.222.152:5000/api
# NEXT_PUBLIC_SOCKET_URL=http://210.131.222.152:5000
```

#### è§£æ±ºæ–¹æ³•3: ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
```bash
cd /var/www/goodfifeproject/client
rm -rf .next
npm run build
pm2 restart goodfife-frontend
```

#### è§£æ±ºæ–¹æ³•4: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
```bash
pm2 status
pm2 logs goodfife-backend --lines 50
curl http://localhost:5000/api/health
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œãªã„
```bash
pm2 logs goodfife-frontend --lines 50
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ©ãƒ¼
```bash
pm2 logs goodfife-backend --lines 50
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æŽ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
mysql -u hitozumano_mitu -p'Hjmitsu^90' -D hitozumano_mitu -e "SHOW TABLES;"
```

## ðŸ“ž CTIæ©Ÿèƒ½ã®ä½¿ã„æ–¹

### 1. ç®¡ç†ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹
http://210.131.222.152:3000/admin/login ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³

### 2. å—æ³¨ãƒœã‚¿ãƒ³
ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€ç®¡ç†ç”»é¢å³ä¸Šã«**ç·‘è‰²ã®ã€Œå—æ³¨ã€ãƒœã‚¿ãƒ³**ãŒè¡¨ç¤ºã•ã‚Œã¾ã™

### 3. å—æ³¨ãƒ¢ãƒ¼ãƒ€ãƒ«æ©Ÿèƒ½
- **é›»è©±ç•ªå·æ¤œç´¢**: é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ã€Œæ¤œç´¢ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
- **é¡§å®¢æƒ…å ±è¡¨ç¤º**: éŽåŽ»ã®æ³¨æ–‡å±¥æ­´ã€ãƒ¡ãƒ¢ãŒå³åº§ã«è¡¨ç¤º
- **æ–°è¦é¡§å®¢**: è©²å½“ãªã—ã®å ´åˆã¯æ–°è¦ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤º
- **ã‚­ãƒ£ã‚¹ãƒˆé¸æŠž**: ã‚­ãƒ£ã‚¹ãƒˆã‚’é¸æŠžã™ã‚‹ã¨åˆå›ž/2å›žç›®ã®åˆ©ç”¨åˆ¤å®šãŒè‡ªå‹•è¡¨ç¤º
- **å—æ³¨ä½œæˆ**: å¿…è¦äº‹é …ã‚’å…¥åŠ›ã—ã¦ã€Œå—æ³¨ã‚’ç¢ºå®šã€

### 4. CTIé€£æºï¼ˆDialpadï¼‰
- Dialpad Webhookã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `http://210.131.222.152:5000/api/cti/dialpad-webhook`
- ç€ä¿¡æ™‚ã«è‡ªå‹•çš„ã«é¡§å®¢æƒ…å ±ãŒãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆè¨­å®šå¾Œï¼‰

## ðŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«

ä»¥ä¸‹ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ï¼š
- `orders` - å—æ³¨ç®¡ç†
- `customer_cast_history` - é¡§å®¢-ã‚­ãƒ£ã‚¹ãƒˆåˆ©ç”¨å±¥æ­´
- `cti_call_logs` - CTIé€šè©±ãƒ­ã‚°
- `customer_notes` - é¡§å®¢ãƒ¡ãƒ¢
- `dialpad_webhook_settings` - Dialpadè¨­å®š

## âœ… å‹•ä½œç¢ºèªé …ç›®

- [ ] ç®¡ç†ç”»é¢ã«ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹
- [ ] ã€Œå—æ³¨ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] é›»è©±ç•ªå·æ¤œç´¢ã§é¡§å®¢æƒ…å ±ãŒå–å¾—ã§ãã‚‹
- [ ] æ–°è¦é¡§å®¢ç™»éŒ²ãŒã§ãã‚‹
- [ ] ã‚­ãƒ£ã‚¹ãƒˆé¸æŠžã§åˆ©ç”¨å±¥æ­´ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å—æ³¨ä½œæˆãŒæˆåŠŸã™ã‚‹
- [ ] é¡§å®¢ã®æ³¨æ–‡å±¥æ­´ãŒç¢ºèªã§ãã‚‹

## ðŸ” ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±

```
é›»è©±ç•ªå·: 09000000000
ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: admin123
```

âš ï¸ **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„**: åˆå›žãƒ­ã‚°ã‚¤ãƒ³å¾Œã€å¿…ãšãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

## ðŸ“ GitHubæƒ…å ±

- **PR**: https://github.com/rothspit/goodfifeproject/pull/1
- **ãƒ–ãƒ©ãƒ³ãƒ**: genspark_ai_developer
- **æœ€æ–°ã‚³ãƒŸãƒƒãƒˆ**: 3b416a5 (API URLä¿®æ­£)ã€972d838 (ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ)ã€c6d4534 (é¡§å®¢ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ )

---

**æœ€çµ‚æ›´æ–°**: 2024-12-13
**ç®¡ç†è€…**: äººå¦»ã®èœœ ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†éƒ¨
