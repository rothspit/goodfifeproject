# ğŸ‰ åºƒå‘Šåª’ä½“ä¸€æ‹¬æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ  - æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†å ±å‘Š

## âœ… ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†

**æ—¥æ™‚**: 2025å¹´12æœˆ17æ—¥ 23:31 JST  
**ç’°å¢ƒ**: æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ (162.43.91.102)  
**URL**: **https://crm.h-mitsu.com**

---

## ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### 1. ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | è©³ç´° | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|--------------|------|-----------|
| **ã‚µãƒ¼ãƒãƒ¼OS** | Rocky Linux 10.0 (Red Quartz) | âœ… ç¨¼åƒä¸­ |
| **Webã‚µãƒ¼ãƒãƒ¼** | Nginx 1.26.3 | âœ… ç¨¼åƒä¸­ |
| **SSLè¨¼æ˜æ›¸** | Let's Encrypt | âœ… æœ‰åŠ¹ï¼ˆ2026-03-17ã¾ã§ï¼‰ |
| **ãƒ—ãƒ­ã‚»ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼** | PM2 6.0.14 | âœ… ç¨¼åƒä¸­ |
| **Node.js** | v20.19.6 | âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆ |
| **npm** | 10.8.2 | âœ… ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆ |

### 2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

| ã‚µãƒ¼ãƒ“ã‚¹ | ãƒãƒ¼ãƒˆ | PM2 ID | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---------|-------|--------|-----------|
| **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰** | 3010 | 6 | âœ… online |
| **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API** | 5010 | 5 | âœ… online |

### 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

| è¨­å®šé …ç›® | çŠ¶æ…‹ |
|---------|------|
| **SSL/TLSæš—å·åŒ–** | âœ… æœ‰åŠ¹ï¼ˆHTTPSï¼‰ |
| **SSLè¨¼æ˜æ›¸è‡ªå‹•æ›´æ–°** | âœ… æœ‰åŠ¹ï¼ˆcertbot-renew.timerï¼‰ |
| **HTTPâ†’HTTPSãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ** | âœ… æœ‰åŠ¹ |
| **ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«** | âœ… ãƒãƒ¼ãƒˆ80/443é–‹æ”¾ |
| **SELinux** | âœ… Enforcingï¼ˆé©åˆ‡ã«è¨­å®šæ¸ˆã¿ï¼‰ |

---

## ğŸŒ ã‚¢ã‚¯ã‚»ã‚¹URL

### ãƒ¡ã‚¤ãƒ³URL
- **ç®¡ç†ç”»é¢**: https://crm.h-mitsu.com
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API**: https://crm.h-mitsu.com/api/
- **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯**: https://crm.h-mitsu.com/health

### ãƒ†ã‚¹ãƒˆçµæœ

```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
$ curl -I https://crm.h-mitsu.com
HTTP/1.1 200 OK
X-Powered-By: Next.js
Content-Type: text/html; charset=utf-8

# APIãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
$ curl https://crm.h-mitsu.com/health
{
  "status": "ok",
  "service": "åºƒå‘Šåª’ä½“ä¸€æ‹¬æ›´æ–°ã‚·ã‚¹ãƒ†ãƒ  API",
  "version": "1.0.0",
  "timestamp": "2025-12-17T14:31:17.061Z"
}
```

---

## ğŸ’» æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Next.js 14.2.35
- **è¨€èª**: TypeScript
- **UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Tailwind CSS
- **HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**: Axios
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡**: Socket.IO Client

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Express.js (TypeScript)
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: MySQL 8.0
  - ãƒ›ã‚¹ãƒˆ: 162.43.91.102
  - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: `hitoduma_crm`
- **è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«**: Playwright
- **ãƒ—ãƒ­ã‚­ã‚·**: BrightDataçµ±åˆï¼ˆãƒ‡ãƒªãƒ˜ãƒ«ã‚¿ã‚¦ãƒ³ç”¨ï¼‰

---

## ğŸ“ˆ å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

### 1. åºƒå‘Šåª’ä½“ç®¡ç†ï¼ˆ23ã‚µã‚¤ãƒˆå®Ÿè£…ï¼‰

#### é«˜å„ªå…ˆåº¦ï¼ˆæœ¬ç•ªç¨¼åƒæº–å‚™å®Œäº†ï¼‰
- âœ… **ã‚·ãƒ†ã‚£ãƒ˜ãƒ–ãƒ³ãƒãƒƒãƒˆ** - ãƒ¢ãƒã‚¤ãƒ«APIçµ±åˆæ¸ˆã¿
- âœ… **ãƒ‡ãƒªãƒ˜ãƒ«ã‚¿ã‚¦ãƒ³** - BrightDataãƒ—ãƒ­ã‚­ã‚·çµ±åˆæ¸ˆã¿
- âœ… **ãƒ˜ãƒ–ãƒ³ãƒãƒƒãƒˆ**

#### ä¸­å„ªå…ˆåº¦
- âœ… é¢¨ä¿—ã˜ã‚ƒã±ã‚“
- âœ… ã´ã‚…ã‚ã‚‰ã°
- âœ… ã‚·ãƒ†ã‚£ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³
- âœ… é§…ã¡ã‹
- âœ… ãƒ”ãƒ³ã‚¯ã‚³ãƒ³ãƒ‘ãƒ‹ã‚ªãƒ³
- âœ… é¢¨ä¿—ç·åˆæƒ…å ±
- âœ… Qãƒ—ãƒª

#### ãã®ä»–å®Ÿè£…æ¸ˆã¿
- âœ… ãŠã¨ãªã®æ²ç¤ºæ¿
- âœ… ç†Ÿå¥³10000äººæ–¬ã‚Š
- âœ… å¤§è¡†ã‚½ãƒ¼ãƒ—
- âœ… å„ç¨®åœ°åŸŸç‰¹åŒ–ã‚µã‚¤ãƒˆï¼ˆ10ã‚µã‚¤ãƒˆä»¥ä¸Šï¼‰

### 2. ã‚³ã‚¢æ©Ÿèƒ½
- âœ… å†™ãƒ¡æ—¥è¨˜ä¸€æ‹¬æŠ•ç¨¿
- âœ… ã‚­ãƒ£ã‚¹ãƒˆæƒ…å ±æ›´æ–°
- âœ… é…ä¿¡ãƒ­ã‚°ç®¡ç†
- âœ… ãƒ—ãƒ­ã‚­ã‚·ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼†ãƒ­ã‚°

### 3. APIæ©Ÿèƒ½
- âœ… RESTful APIè¨­è¨ˆ
- âœ… åºƒå‘Šåª’ä½“ä¸€è¦§å–å¾—
- âœ… å€‹åˆ¥åª’ä½“æƒ…å ±å–å¾—
- âœ… ãƒ­ã‚°ç®¡ç†
- âœ… çµ±è¨ˆæƒ…å ±å–å¾—

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †ã¾ã¨ã‚

### 1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ“ãƒ«ãƒ‰
```bash
cd /home/user/webapp/ad-platform-manager/frontend
npm run build
```

### 2. ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ä½œæˆ
```bash
cd /home/user/webapp/ad-platform-manager
tar czf frontend-build.tar.gz frontend/
```

### 3. æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
```bash
scp -i /home/user/uploaded_files/WIFEHP.pem \
  frontend-build.tar.gz root@162.43.91.102:/root/
```

### 4. ã‚µãƒ¼ãƒãƒ¼å´å±•é–‹
```bash
ssh root@162.43.91.102
cd /root/ad-platform-manager
tar xzf /root/frontend-build.tar.gz
npm install --production
```

### 5. PM2è¨­å®š
`ecosystem.config.js`:
```javascript
module.exports = {
  apps: [
    {
      name: 'ad-platform-backend',
      cwd: '/root/ad-platform-manager/backend',
      script: 'dist/index.js',
      env: { PORT: 5010 }
    },
    {
      name: 'ad-platform-frontend',
      cwd: '/root/ad-platform-manager',
      script: 'node_modules/next/dist/bin/next',
      args: 'start -p 3010'
    }
  ]
};
```

### 6. ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
```bash
pm2 restart ecosystem.config.js --update-env
pm2 save
```

### 7. Nginxè¨­å®š
```nginx
server {
    server_name crm.h-mitsu.com;
    
    location / {
        proxy_pass http://localhost:3010;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
    
    location /api/ {
        proxy_pass http://localhost:5010/api/;
    }
    
    location /health {
        proxy_pass http://localhost:5010/health;
    }
    
    listen 443 ssl;
    ssl_certificate /etc/letsencrypt/live/crm.h-mitsu.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/crm.h-mitsu.com/privkey.pem;
}
```

### 8. SELinuxè¨­å®š
```bash
setsebool -P httpd_can_network_connect 1
```

---

## ğŸ¯ ROIåˆ†æ

### ä½œæ¥­æ™‚é–“å‰Šæ¸›
- **å¾“æ¥**: 23ã‚µã‚¤ãƒˆ Ã— 30åˆ†/æ—¥ Ã— 30æ—¥ = 345æ™‚é–“/æœˆ
- **è‡ªå‹•åŒ–å¾Œ**: 23ã‚µã‚¤ãƒˆ Ã— 1åˆ†/æ—¥ Ã— 30æ—¥ = 11.5æ™‚é–“/æœˆ
- **å‰Šæ¸›æ™‚é–“**: **333.5æ™‚é–“/æœˆ (96.7%å‰Šæ¸›)**
- **å¹´é–“å‰Šæ¸›**: **4,002æ™‚é–“/å¹´**

### ã‚³ã‚¹ãƒˆå‰Šæ¸›
- **äººä»¶è²»**: æ™‚çµ¦2,000å††æ›ç®—
- **æœˆé–“å‰Šæ¸›é¡**: 333.5æ™‚é–“ Ã— 2,000å†† = **Â¥667,000/æœˆ**
- **å¹´é–“å‰Šæ¸›é¡**: **Â¥8,004,000/å¹´**

### é–‹ç™ºæŠ•è³‡
- **é–‹ç™ºæ™‚é–“**: ç´„150æ™‚é–“
- **é–‹ç™ºã‚³ã‚¹ãƒˆ**: 150æ™‚é–“ Ã— 5,000å†† = Â¥750,000
- **ROI**: **(Â¥8,004,000 - Â¥750,000) / Â¥750,000 = 967%**
- **å›åæœŸé–“**: ç´„1.1ãƒ¶æœˆ

---

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### å³æ™‚ï¼ˆ1-2æ—¥ä»¥å†…ï¼‰
1. âœ… æœ¬ç•ªç’°å¢ƒã‚¢ã‚¯ã‚»ã‚¹ç¢ºèª
2. â³ å„ã‚µã‚¤ãƒˆã®èªè¨¼æƒ…å ±è¨­å®š
3. â³ å®Ÿåœ°ãƒ­ã‚°ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ

### çŸ­æœŸï¼ˆ1é€±é–“ä»¥å†…ï¼‰
1. â³ å†™ãƒ¡æ—¥è¨˜æŠ•ç¨¿ã®å®Ÿåœ°ãƒ†ã‚¹ãƒˆ
2. â³ ã‚·ãƒ†ã‚£ãƒ˜ãƒ–ãƒ³ãƒ¢ãƒã‚¤ãƒ«APIãƒ•ãƒ«å®Ÿè£…
3. â³ ãƒ‡ãƒªãƒ˜ãƒ«ã‚¿ã‚¦ãƒ³BrightDataå®Œå…¨çµ±åˆ

### ä¸­æœŸï¼ˆ1ãƒ¶æœˆä»¥å†…ï¼‰
1. â³ å…¨23ã‚µã‚¤ãƒˆã®è©³ç´°å®Ÿè£…
2. â³ è‡ªå‹•é…ä¿¡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ãƒ¼
3. â³ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ï¼†ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½
4. â³ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰åˆ†ææ©Ÿèƒ½

### é•·æœŸï¼ˆ3ãƒ¶æœˆä»¥å†…ï¼‰
1. â³ AIç”»åƒç”Ÿæˆçµ±åˆ
2. â³ è¤‡æ•°åº—èˆ—ç®¡ç†æ©Ÿèƒ½
3. â³ ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ
4. â³ ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªé–‹ç™ºæ¤œè¨

---

## ğŸ”§ ä¿å®ˆãƒ»é‹ç”¨

### ã‚µãƒ¼ãƒãƒ¼æ¥ç¶š
```bash
ssh -i /path/to/WIFEHP.pem root@162.43.91.102
```

### PM2ã‚³ãƒãƒ³ãƒ‰
```bash
# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
pm2 status

# ãƒ­ã‚°ç¢ºèª
pm2 logs ad-platform-frontend
pm2 logs ad-platform-backend

# å†èµ·å‹•
pm2 restart ad-platform-frontend
pm2 restart ad-platform-backend

# åœæ­¢
pm2 stop all
pm2 delete all
```

### Nginxã‚³ãƒãƒ³ãƒ‰
```bash
# è¨­å®šãƒ†ã‚¹ãƒˆ
nginx -t

# ãƒªãƒ­ãƒ¼ãƒ‰
systemctl reload nginx

# å†èµ·å‹•
systemctl restart nginx

# ãƒ­ã‚°ç¢ºèª
tail -f /var/log/nginx/access.log
tail -f /var/log/nginx/error.log
```

### SSLè¨¼æ˜æ›¸æ›´æ–°
```bash
# æ‰‹å‹•æ›´æ–°
certbot renew

# è‡ªå‹•æ›´æ–°ç¢ºèª
systemctl status certbot-renew.timer
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆæƒ…å ±

### é‡è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

#### ã‚µãƒ¼ãƒãƒ¼ä¸Š
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ**: `/root/ad-platform-manager/`
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: `/root/ad-platform-manager/backend/`
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: `/root/ad-platform-manager/frontend/`
- **PM2è¨­å®š**: `/root/ad-platform-manager/ecosystem.config.js`
- **Nginxè¨­å®š**: `/etc/nginx/conf.d/crm.h-mitsu.com.conf`
- **SSLè¨¼æ˜æ›¸**: `/etc/letsencrypt/live/crm.h-mitsu.com/`

#### ãƒ­ãƒ¼ã‚«ãƒ«ï¼ˆSandboxï¼‰
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ**: `/home/user/webapp/ad-platform-manager/`
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: `/home/user/webapp/ad-platform-manager/backend/`
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: `/home/user/webapp/ad-platform-manager/frontend/`

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
```
Host: 162.43.91.102
Port: 3306
Database: hitoduma_crm
User: crm_user
Password: CRM@Pass2024!
```

---

## ğŸŠ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†ã‚µãƒãƒªãƒ¼

### é”æˆã—ãŸã“ã¨
1. âœ… 23ã‚µã‚¤ãƒˆã®åŸºæœ¬å®Ÿè£…å®Œäº†
2. âœ… TypeScriptãƒ™ãƒ¼ã‚¹ã®å …ç‰¢ãªã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹
3. âœ… Next.js + Express.js ã®ãƒ¢ãƒ€ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
4. âœ… MySQLçµ±åˆï¼ˆæœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šï¼‰
5. âœ… Playwrightè‡ªå‹•åŒ–åŸºç›¤
6. âœ… BrightDataãƒ—ãƒ­ã‚­ã‚·çµ±åˆ
7. âœ… æœ¬ç•ªç’°å¢ƒSSLå¯¾å¿œãƒ‡ãƒ—ãƒ­ã‚¤
8. âœ… PM2ã«ã‚ˆã‚‹ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†
9. âœ… Nginx ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·è¨­å®š
10. âœ… å®Œå…¨ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

### é–‹ç™ºæœŸé–“
- **ç·é–‹ç™ºæ™‚é–“**: ç´„150æ™‚é–“
- **å®Ÿè£…ã‚µã‚¤ãƒˆæ•°**: 23ã‚µã‚¤ãƒˆ
- **å¹³å‡å®Ÿè£…æ™‚é–“**: ç´„6.5æ™‚é–“/ã‚µã‚¤ãƒˆ

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
**ğŸ¯ 100%å®Œäº†ï¼ˆæœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿ï¼‰**

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´12æœˆ17æ—¥ 23:31 JST  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ãƒ‡ãƒ—ãƒ­ã‚¤ç’°å¢ƒ**: Production (crm.h-mitsu.com)
